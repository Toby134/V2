:root{
  --bg-1: #f9f3f1;
  --rose-500: #dc2626;
  --rose-600: #b91c1c;
  --accent: #ffb4b4;
  --muted: #7c2d12;
  --glass: rgba(255,255,255,0.7);
  --card-radius: 24px;
  --max-width: 1150px;
}

/* Typography */
html,body{height:100%;}
body{
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  color: var(--muted);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

h1,h2,h3{font-family: 'Playfair Display', Georgia, serif;}

/* Envelope heart animation */
.envelope-heart{
  position: absolute;
  left: 50%;
  top: 24%;
  transform: translate(-50%, -10%);
  transition: transform 300ms ease, opacity 300ms ease;
  opacity: 0.95;
  filter: drop-shadow(0 6px 18px rgba(220,38,38,0.25));
}
.envelope.open .envelope-heart{
  transform: translate(-50%, -16%) scale(1.15);
}

/* Confetti canvas overlay */
#confetti-canvas{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .envelope-heart, * { animation-duration: 0.001ms !important; transition-duration: 0.001ms !important; }
}

/* Small helpers */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Global audio control styles */
#audio-control{
  position: fixed;
  right: 1.25rem;
  bottom: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,245,245,0.9));
  padding: 0.5rem 0.6rem;
  border-radius: 18px;
  border: 1px solid rgba(220,38,38,0.08);
  box-shadow: 0 10px 30px rgba(220,38,38,0.12);
  z-index: 10000;
  backdrop-filter: blur(6px) saturate(120%);
}

#global-play-btn{
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg,var(--rose-500),var(--rose-600));
  color: white;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.05rem;
  border: none;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(220,38,38,0.18);
}
#global-play-btn:hover{ transform: translateY(-2px); }

#global-play-btn:active{ transform: scale(0.96); }

#global-progress{
  width: 120px;
  height: 6px;
  background: rgba(0,0,0,0.06);
  border-radius: 999px;
  overflow: hidden;
}

#global-progress-fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, #ff8a8a, #dc2626);
  transition: width 250ms linear;
}

@media (max-width: 520px){
  #audio-control{ right: 0.5rem; bottom: 0.75rem; }
  #global-progress{ width: 80px; }
}

/* Mute button */
#global-mute-btn{
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg,var(--rose-500),var(--rose-600));
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
  border: none;
  cursor: pointer;
  color: #fff;
  box-shadow: 0 8px 20px rgba(220,38,38,0.18);
}
#global-mute-btn:active{ transform: scale(0.96); }

/* Shared audio button style for player controls */
.audio-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,245,245,0.9));
  color: var(--rose-600);
  border: 1px solid rgba(220,38,38,0.06);
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
  cursor: pointer;
  transition: transform 160ms ease, box-shadow 160ms ease;
}
.audio-btn:hover{ transform: translateY(-3px); box-shadow: 0 10px 24px rgba(0,0,0,0.12); }
.audio-btn:active{ transform: translateY(-1px) scale(0.98); }

/* Make page controls slightly larger and match color */
#page3 .audio-btn{ width:56px; height:56px; font-size:1.2rem; }

/* Progress bar styling to match theme */
#progress-bar, #global-progress-fill{ background: linear-gradient(90deg, #ff9b9b, #dc2626); }

/* Proceed button locked state */
.proceed-btn[aria-disabled="true"]{
  opacity: 0.6;
  transform: none !important;
  filter: grayscale(0.05) saturate(0.9);
}
.proceed-btn.locked-shake{
  animation: shake 420ms ease;
}
@keyframes shake{
  0%{ transform: translateX(0); }
  25%{ transform: translateX(-6px); }
  50%{ transform: translateX(6px); }
  75%{ transform: translateX(-4px); }
  100%{ transform: translateX(0); }
}

/* Volume slider styles */
#global-volume{
  width: 110px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  height: 22px;
}
#global-volume::-webkit-slider-runnable-track{
  height: 6px;
  background: linear-gradient(90deg,#ff8a8a,#dc2626);
  border-radius: 999px;
}
#global-volume::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 3px solid #dc2626;
  margin-top: -4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
#global-volume:focus{ outline: none; box-shadow: 0 0 0 4px rgba(220,38,38,0.12); }

/* Firefox styles */
#global-volume::-moz-range-track{ height:6px; background: linear-gradient(90deg,#ff8a8a,#dc2626); border-radius:999px; }
#global-volume::-moz-range-thumb{ width:14px; height:14px; border-radius:50%; background:#fff; border:3px solid #dc2626; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
